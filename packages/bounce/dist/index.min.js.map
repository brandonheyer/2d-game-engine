{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./ball-entity.js","webpack:///./base-ball-entity.js","webpack:///./index.js","webpack:///external \"TwoDeeEngine\""],"names":["BallEntity","options","initKillWhenStable","other","normalizedVector","magnitude","separation","bounce","delta","gravity","boundaryReflect","killWhenStable","BaseBallEntity","BALL_RADIUS_MIN","BALL_RADIUS_MAX","BALL_RADIUS_RANGE","rng","random","clone","seedrandom","rngRadius","uniformInt","Math","max","Vector","tempVector","magnitudeSq","minDistanceSq","minDistance","i","heading","dead","engine","radius","mass","Point","randomXPos","randomYPos","x","pos","y","sqrt","onCollision","entities","length","index","updateWithOther","preUpdatePosition","updatePosition","postUpdatePosition","element","translation","set","xScale","yScale","plusEquals","canvas","makeCircle","fill","stroke","BaseEntity","addBalls","count","STARTING_COUNT","xMax","yMax","entity","addEntity","demo","TwoEngine","start"],"mappings":"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","file":"index.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import {\n  separation,\n  bounce,\n  boundaryReflect,\n  gravity,\n  initKillWhenStable,\n  killWhenStable\n} from \"2d-engine\";\n\nimport BaseBallEntity from \"./base-ball-entity\";\n\nexport default class BallEntity extends BaseBallEntity {\n  initializeProperties(options) {\n    initKillWhenStable(this);\n\n    super.initializeProperties(options);\n  }\n\n  onCollision(other, normalizedVector, magnitude) {\n    separation(this, other, normalizedVector, magnitude);\n    bounce(this, other, normalizedVector);\n  }\n\n  preUpdatePosition(delta) {\n    gravity(this, delta);\n  }\n\n  postUpdatePosition() {\n    boundaryReflect(this);\n    killWhenStable(this);\n  }\n}\n","import {\n  Point,\n  Vector,\n  BaseEntity,\n  random,\n  seedrandom\n} from \"2d-engine\";\n\nconst BALL_RADIUS_MIN = 2;\nconst BALL_RADIUS_MAX = 20;\nconst BALL_RADIUS_RANGE = BALL_RADIUS_MAX - BALL_RADIUS_MIN;\n\nconst rng = random.clone(seedrandom(\"ball-entity\"));\nconst rngRadius = rng.uniformInt(BALL_RADIUS_MIN, Math.max(BALL_RADIUS_RANGE, 1));\n\nlet normalizedVector = new Vector(0, 0);\nlet tempVector = new Vector(0, 0);\nlet magnitudeSq = 0;\nlet magnitude = 0;\nlet minDistanceSq = 0;\nlet minDistance = 0;\nlet i = 0;\n\nexport default class BallEntity extends BaseEntity {\n  constructor(options) {\n    super(options);\n\n    this.heading = new Vector(0, 0);\n  }\n\n  initializeProperties(options) {\n    this.dead = false;\n    this.engine = options.engine;\n    this.radius = rngRadius();\n    this.mass = this.radius;\n\n    super.initializeProperties(options);\n  }\n\n  startingPosition() {\n    return new Point(\n      this.engine.randomXPos(),\n      this.engine.randomYPos()\n    );\n  }\n\n  updateWithOther(delta, other) {\n    tempVector.x = this.pos.x - other.pos.x;\n    tempVector.y = this.pos.y - other.pos.y;\n\n    magnitudeSq = tempVector.magnitudeSq();\n    minDistance = this.radius + other.radius;\n    minDistanceSq = minDistance * minDistance;\n\n    if (magnitudeSq < minDistanceSq) {\n      magnitude = Math.sqrt(magnitudeSq);\n\n      normalizedVector.x = tempVector.x / magnitude;\n      normalizedVector.y = tempVector.y / magnitude;\n\n      this.onCollision(other, normalizedVector, magnitude);\n    }\n  }\n\n  update(delta) {\n    for (i = 0; i < this.entities.length; i++) {\n      if (this.index !== i) {\n        this.updateWithOther(delta, this.entities[i]);\n      }\n    }\n\n    this.preUpdatePosition(delta);\n    this.updatePosition(delta);\n    this.postUpdatePosition();\n\n    this.element.translation.set(\n      this.xScale(this.pos.x),\n      this.yScale(this.pos.y)\n    );\n  }\n\n  preUpdatePosition(delta) {}\n\n  updatePosition(delta) {\n    this.pos.plusEquals(this.heading);\n  }\n\n  postUpdatePosition() {}\n\n  render(canvas) {\n    this.element = canvas.makeCircle(\n      this.xScale(this.pos.x),\n      this.yScale(this.pos.y),\n      this.xScale(this.radius)\n    );\n\n    this.element.fill = \"#8C8880\";\n    this.element.stroke = \"none\";\n  }\n}\n\nlet dead = 0;\n","import $ from 'jquery';\nimport { TwoEngine, random, seedrandom } from '2d-engine';\n\nimport BallEntity from './ball-entity';\nimport BaseBallEntity from './base-ball-entity';\n\nexport function addBalls(engine, count = STARTING_COUNT) {\n  engine.randomXPos = random.clone(seedrandom(\"bounce-pos-x\"))\n    .uniformInt(0, engine.xMax);\n  engine.randomYPos = random.clone(seedrandom(\"bounce-pos-y\"))\n    .uniformInt(0, engine.yMax);\n\n  for (let i = 0; i < STARTING_COUNT; i++) {\n    const entity = new BallEntity({\n      engine: engine\n    });\n\n    entity.index = i;\n    entity.entities = engine.entities;\n    entity.engine = engine;\n\n    engine.addEntity(entity);\n  }\n}\n\nexport {\n  BallEntity,\n  BaseBallEntity\n};\n\nexport function demo() {\n  const STARTING_COUNT = 250;\n\n  const engine = new TwoEngine(\n    '.canvas',\n    700, 700,\n    1000, 1000\n  );\n\n  addBalls(engine);\n\n  // let iterations = 0;\n  // let logTime = 0;\n  // const oldTick = engine.tick.bind(engine);\n  //\n  // engine.tick = function() {\n  //   iterations++;\n  //\n  //   if (iterations > 500) {\n  //     console.profileEnd();\n  //     engine.tick = oldTick;\n  //   }\n  //\n  //   return oldTick();\n  // }\n\n  // console.profile();\n\n  engine.start();\n}\n","module.exports = TwoDeeEngine;"],"sourceRoot":""}